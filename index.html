<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DuckDB CSV Query Tool</title>
</head>

<body>
    <h1>DuckDB CSV Query Tool</h1>
    <h3>The tables will be available to use as "my_table" if the filename is "my_table.csv"</h3>
    <input type="file" id="csvFile" accept=".csv" multiple />
    <textarea id="sqlQuery" placeholder="Enter your SQL query here (CSV file will be accessable as my_table or as filename)" style="width: 100%; height: 100px;"></textarea>
    <textarea id="sqlResult" placeholder="Output" style="width: 100%; height: 100px;"></textarea>
    <button onclick="runQuery()">Run Query</button>
    <br>
    <button onclick="resetAll()">Reset</button>
    <br>
    <a id="downloadLink" style="display:none;">Download CSV Result</a>
    <div id="errorMessage" style="color: red; font-weight: bold; margin-top: 10px;"></div>

    <script src="script.js"></script>

    <!-- Load DuckDB from CDN -->
    <script type="module">
        import * as duckdbWasm from "https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm";
        window.duckdbWasm = duckdbWasm;
    </script>
</body>

</html>